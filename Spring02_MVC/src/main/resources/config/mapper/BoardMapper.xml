<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper
3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.multi.mapper.BoardMapper">
	<insert id="insertBoard" parameterType="Board">
		<selectKey keyProperty="num" resultType="_int" order="BEFORE">
			select spring_board_seq.nextval from dual
		</selectKey>
		insert into spring_board(num,userid,subject,content,passwd,
		filename,filesize,originFilename,refer,lev,sunbun)
		values(#{num},#{userid},#{subject:VARCHAR},#{content:VARCHAR},#{passwd}
		,#{filename:VARCHAR},#{filesize:NUMERIC},#{originFilename:VARCHAR}
		,#{num},0,0)
		<!-- 원글쓰기: 글그룹번호(refer)를 글번호(num)과 동일하게 insert 
					lev : 0
					sunbun:0
		-->
	</insert>
	
	<select id="getBoardAll" resultType="Board">
		select num,subject,userid,wdate,readnum
		from spring_board
		order by num desc
	</select>
	
	<select id="getTotalCount" resultType="_int">
		select count(*) from spring_board
	</select>

</mapper>